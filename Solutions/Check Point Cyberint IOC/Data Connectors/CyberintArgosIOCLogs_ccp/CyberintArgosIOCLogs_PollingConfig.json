{
  "kind": "RestApiPoller",
  "properties": {
    "connectorDefinitionName": "[[parameters('connectorDefinitionName')]",
    "dcrConfig": {
      "streamName": "Custom-iocsent_CL",
      "dataCollectionEndpoint": "[[parameters('dcrConfig').dataCollectionEndpoint]",
      "dataCollectionRuleImmutableId": "[[parameters('dcrConfig').dataCollectionRuleImmutableId]"
    },
    "dataType": "iocsent_CL",
    "auth": {
      "type": "APIKey",
      "ApiKey": "[[parameters('apikey')]",
      "ApiKeyName": "Cookie",
      "ApiKeyIdentifier": "access_token="
    },
    "request": {
      "apiEndpoint": "[[parameters('argosurl')]",
      "rateLimitQPS": 10,
      "queryWindowInMin": 1440,
      "httpMethod": "POST",
      "queryTimeFormat": "yyyy-MM-dd",
      "retryCount": 3,
      "timeoutInSeconds": 60,
      "headers": {
        "Accept": "application/json",
        "User-Agent": "Scuba",
        "X-Sender-Id": "0",
        "X-Integration-Type": "Azure Sentinel IOC",
        "X-Integration-Instance-Name": "Default",
        "X-Integration-Instance-Id": "0",
        "X-Integration-Customer-Name": "Integration",
        "X-Integration-Version": "1.0"
      },
      "isPostPayloadJson": true,
      "queryParametersTemplate": "{ 'date': '{_QueryWindowStartTime}', 'format': 'json', 'daysBack': 1, 'limit': 1000000, 'offset': 0 }"
    },
    "response": {
      "eventsJsonPaths": ["$"]
    }
  }
}
